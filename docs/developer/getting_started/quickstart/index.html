<!DOCTYPE html>
<html lang="en" dir=>

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Quick Start#Example Plugin#lib.rs
#![no_main] // Define the functions from the framework which allow access to sending messages extern &#34;C&#34; { fn send_message( content_ptr: *const u8, content_len: usize, room_id_ptr: *const u8, room_id_len: usize, ); } // Export a function named &#34;main_plugin&#34;. This can be called // from the framework! #[no_mangle] pub extern &#34;C&#34; fn main_plugin() { println!(&#34;called main_plugin&#34;); // Call the function we just imported and pass in  // the offset of our string and its length as parameters.">
<meta name="theme-color" content="#FFFFFF"><meta property="og:title" content="" />
<meta property="og:description" content="Quick Start#Example Plugin#lib.rs
#![no_main] // Define the functions from the framework which allow access to sending messages extern &#34;C&#34; { fn send_message( content_ptr: *const u8, content_len: usize, room_id_ptr: *const u8, room_id_len: usize, ); } // Export a function named &#34;main_plugin&#34;. This can be called // from the framework! #[no_mangle] pub extern &#34;C&#34; fn main_plugin() { println!(&#34;called main_plugin&#34;); // Call the function we just imported and pass in  // the offset of our string and its length as parameters." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://mx-eternity.github.io/docs/developer/getting_started/quickstart/" />
<meta property="article:modified_time" content="2020-08-07T21:01:19+02:00" />
<title>Quickstart | Matrix Eternity Documentation</title>
<link rel="manifest" href="/manifest.json">
<link rel="icon" href="/favicon.png" type="image/x-icon">
<link rel="stylesheet" href="/book.min.1a131c7481808eb224a861e902f1d8c9281d14ff14ed144454d086c8d6fd5cca.css" integrity="sha256-GhMcdIGAjrIkqGHpAvHYySgdFP8U7RREVNCGyNb9XMo=">
<script defer src="/en.search.min.e78b5b3d27f524f3316f39ae87baff6567bf7d05f5c7a7865d7e870a87de70af.js" integrity="sha256-54tbPSf1JPMxbzmuh7r/ZWe/fQX1x6eGXX6HCofecK8="></script>
<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body dir=>
  <input type="checkbox" class="hidden toggle" id="menu-control" />
  <input type="checkbox" class="hidden toggle" id="toc-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>Matrix Eternity Documentation</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>











  <ul>
<li><a href="/docs/user/"><strong>User Docs</strong></a>
<ul>
<li><a href="/docs/user/getting_started/"><strong>Getting Started</strong></a>
<ul>
<li><a href="/docs/user/getting_started/quickstart/"><strong>Quickstart</strong></a></li>
</ul>
</li>
<li><a href="/docs/user/config_reference/"><strong>Config Reference</strong></a></li>
<li><a href="/docs/user/flow_reference/"><strong>Flow Reference</strong></a></li>
</ul>
</li>
<li><a href="/docs/developer/"><strong>Developer Docs</strong></a>
<ul>
<li><a href="/docs/developer/getting_started/"><strong>Getting Started</strong></a>
<ul>
<li><a href="/docs/developer/getting_started/quickstart/"class=active><strong>Quickstart</strong></a></li>
</ul>
</li>
<li><a href="/docs/developer/plugin_config_reference/"><strong>Plugin Config Reference</strong></a>
<br /></li>
</ul>
</li>
</ul>






  
<ul>
  
  <li>
    <a href="https://github.com/mx-eternity/docs" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Quickstart</strong>

  <label for="toc-control">
    
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
    
  </label>
</div>


  
  <aside class="hidden clearfix">
    
  <nav id="TableOfContents">
  <ul>
    <li><a href="#quick-start">Quick Start</a>
      <ul>
        <li><a href="#example-plugin">Example Plugin</a></li>
      </ul>
    </li>
  </ul>
</nav>


  </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="quick-start">
  Quick Start
  <a class="anchor" href="#quick-start">#</a>
</h1>
<h2 id="example-plugin">
  Example Plugin
  <a class="anchor" href="#example-plugin">#</a>
</h2>
<p>lib.rs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#75715e">#![no_main]</span>

<span style="color:#75715e">// Define the functions from the framework which allow access to sending messages
</span><span style="color:#75715e"></span><span style="color:#66d9ef">extern</span> <span style="color:#e6db74">&#34;C&#34;</span> {
    <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">send_message</span>(
        content_ptr: <span style="color:#f92672">*</span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">u8</span>,
        content_len: <span style="color:#66d9ef">usize</span>,
        room_id_ptr: <span style="color:#f92672">*</span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">u8</span>,
        room_id_len: <span style="color:#66d9ef">usize</span>,
    );
}

<span style="color:#75715e">// Export a function named &#34;main_plugin&#34;. This can be called
</span><span style="color:#75715e">// from the framework!
</span><span style="color:#75715e"></span><span style="color:#75715e">#[no_mangle]</span>
<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">extern</span> <span style="color:#e6db74">&#34;C&#34;</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">main_plugin</span>() {
    println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;called main_plugin&#34;</span>);
    <span style="color:#75715e">// Call the function we just imported and pass in
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// the offset of our string and its length as parameters.
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">let</span> content <span style="color:#f92672">=</span>
        <span style="color:#e6db74">&#34;{\&#34;type\&#34;: \&#34;m.room.message\&#34;,\&#34;content\&#34;: {\&#34;msgtype\&#34;: \&#34;m.text\&#34;,\&#34;body\&#34;: \&#34;test\&#34;}}&#34;</span>;
    <span style="color:#66d9ef">let</span> room_id <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;!KwXDovBFhYakswlOwN:nordgedanken.dev&#34;</span>;
    <span style="color:#66d9ef">unsafe</span> {
        send_message(
            content.as_ptr(),
            content.len(),
            room_id.as_ptr(),
            room_id.len(),
        );
    }
}
</code></pre></div><blockquote class="book-hint warning">
  <strong>TODO</strong><br>
Further decide what format we use to transfer the message from plugins back to the framework. (Can we serialize stuff using ruma?)
</blockquote>

</article>
 
      

      <footer class="book-footer">
        
  <div class="flex flex-wrap justify-between">



  <div><a class="flex align-center" href="https://github.com/mx-eternity/docs/commit/5e9b6f0c72b1526da27cae0f66bf1b2405e2650e" title='Last modified by MTRNord | 7 August, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>7 August, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/mx-eternity/docs/edit/master/content/docs/developer/getting_started/quickstart.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#quick-start">Quick Start</a>
      <ul>
        <li><a href="#example-plugin">Example Plugin</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












